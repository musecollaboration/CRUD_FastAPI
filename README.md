# Проект по освоению FastAPI и его экосистемы

Цель проекта — практическое освоение фреймворка **FastAPI** и связанных инструментов: `Pydantic`, `SQLAlchemy`, роутеров, зависимостей (`Depends`) и работы с данными.

В рамках проекта реализован **полный CRUD** с вложенностью, фильтрацией, схемами, сериализацией, а также различными форматами выдачи (вложенные и плоские структуры).

---

## Функциональность

- Реализация CRUD для категорий и продуктов
- Вложенность категорий и вложенные товары
- Фильтрация и поиск
- Сериализация с помощью `Pydantic`
- Использование `Depends` и роутеров
- Работа с деревьями и flat-структурами
- Поддержка разных форматов выдачи (вложенное дерево, плоский список)

## Структура проекта

```
app/
├── api/                # Роутеры
│   ├── category.py     # Роуты категорий
│   └── product.py      # Роуты продуктов
│
├── crud/               # CRUD-операции
│   ├── category.py
│   └── product.py
│
├── models/             # SQLAlchemy модели
│   ├── category.py
│   └── product.py
│
├── schemas/            # Pydantic-схемы
│   ├── category.py
│   └── product.py
│
├── main.py             # Точка входа
│
alembic/                # Миграции базы данных
requirements.txt        # Зависимости проекта
```

## Запуск проекта

1. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```

2. Инициализируйте Alembic (если нужно):

   ```bash
   alembic init alembic
   ```

3. Примените миграции:

   ```bash
   alembic upgrade head
   ```

4. Запустите приложение:

   ```bash
   uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   ```

## Примеры API

### Категории

| Метод  | URL                                            | Описание                                    |
| ------ | ---------------------------------------------- | ------------------------------------------- |
| GET    | `/categories/`                                 | Получить все категории                      |
| POST   | `/categories/`                                 | Создать новую категорию                     |
| GET    | `/categories/flat-tree`                        | Получить плоское дерево категорий и товаров |
| GET    | `/categories/{category_id}`                    | Получить категорию по ID                    |
| PATCH  | `/categories/{category_id}`                    | Обновить данные категории                   |
| DELETE | `/categories/{category_id}`                    | Удалить категорию                           |
| GET    | `/categories/{category_id}/tree-with-products` | Получить дерево с товарами по категории     |

### Продукты

| Метод  | URL                      | Описание             |
| ------ | ------------------------ | -------------------- |
| GET    | `/products/`             | Получить все товары  |
| POST   | `/products/`             | Создать товар        |
| PATCH  | `/products/{product_id}` | Обновить товар       |
| GET    | `/products/{product_id}` | Получить товар по ID |
| DELETE | `/products/{product_id}` | Удалить товар        |

## Контакты

**Александр Терехов** — [@musecollaboration](https://t.me/musecollaboration)
